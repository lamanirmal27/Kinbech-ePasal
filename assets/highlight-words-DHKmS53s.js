let g=36,w="";for(;g--;)w+=g.toString(36);function h(e=11){let t="",r=e;for(;r--;)t+=w[Math.random()*36|0];return t}const _=e=>e.replace(/[|\\{}()[\]^$+*?.-]/g,t=>`\\${t}`),d=e=>e.replace(/\s{2,}/g," ").split(" ").join("|"),P=({terms:e,matchExactly:t=!1})=>{if(typeof e!="string")throw new TypeError("Expected a string");const r=_(e.trim());return`(${t?r:d(r)})`},x=({terms:e,matchExactly:t=!1})=>{try{const r=/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.exec(e);return r?new RegExp(r[2],r[3]):new RegExp(P({terms:e,matchExactly:t}),"ig")}catch{throw new TypeError("Expected terms to be either a string or a RegExp!")}},O=e=>t=>t!==null&&typeof t=="object"&&e in t,p=O("match"),c=e=>typeof e<"u";function E({curr:e,next:t,prev:r,clipBy:o=3}){const s=e.text.split(" "),i=s.length;if(e.match||o>=i)return e.text;const n="...";return c(t)&&c(r)&&p(r)&&p(t)?i>o*2?[...s.slice(0,o),n,...s.slice(-o)].join(" "):e.text:c(t)&&p(t)?[n,...s.slice(-o)].join(" "):c(r)&&p(r)?[...s.slice(0,o),n].join(" "):e.text}var y=Object.defineProperty,v=Object.defineProperties,j=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&m(e,r,t[r]);if(u)for(var r of u(t))b.call(t,r)&&m(e,r,t[r]);return e},S=(e,t)=>v(e,j(t));const T=e=>e.length>0,$=({text:e,query:t,clipBy:r,matchExactly:o=!1})=>{const s=typeof t=="string"?t.trim():t;if(s==="")return[{key:h(),text:e,match:!1}];const i=x({terms:t,matchExactly:o});return e.split(i).filter(T).map(n=>({key:h(),text:n,match:o?n.toLowerCase()===s.toLowerCase():i.test(n)})).map((n,a,l)=>f(f({},n),typeof r=="number"&&{text:E(S(f(f({curr:n},a<l.length-1&&{next:l[a+1]}),a>0&&{prev:l[a-1]}),{clipBy:r}))}))};export{$ as h};
